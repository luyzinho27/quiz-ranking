<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathMaster - Plataforma de Aprendizado de Matemática</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
</head>
<body>
    <!-- Overlay de Carregamento -->
    <div id="loadingOverlay" class="loading-overlay active">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner"></div>
            </div>
            <p>Carregando MathMaster...</p>
        </div>
    </div>

    <!-- Tela de Login/Cadastro -->
    <div id="authScreen" class="auth-screen active">
        <div class="auth-container">
            <div class="auth-header">
                <div class="auth-logo">
                    <i class="fas fa-brain"></i>
                    <h1>Math<span>Master</span></h1>
                </div>
                <p class="auth-subtitle">Domine a matemática de forma divertida e interativa</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Entrar</button>
                <button class="auth-tab" data-tab="register">Cadastrar</button>
                <button class="auth-tab" data-tab="recover">Recuperar Senha</button>
            </div>

            <!-- Formulário de Login -->
            <div id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label for="loginEmail">
                        <i class="fas fa-envelope"></i> Email
                    </label>
                    <input type="email" id="loginEmail" placeholder="seu@email.com" required>
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">
                        <i class="fas fa-lock"></i> Senha
                    </label>
                    <div class="password-input">
                        <input type="password" id="loginPassword" placeholder="Sua senha" required>
                        <button type="button" class="toggle-password" data-target="loginPassword">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="rememberMe">
                        <span>Lembrar de mim</span>
                    </label>
                    <a href="#" class="forgot-password" data-tab="recover">Esqueceu a senha?</a>
                </div>

                <button id="loginBtn" class="btn-auth btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Entrar
                </button>

                <div class="auth-divider">
                    <span>ou entre com</span>
                </div>

                <button id="googleLoginBtn" class="btn-auth btn-google">
                    <i class="fab fa-google"></i> Google
                </button>

                <div class="auth-footer">
                    <p>Não tem uma conta? <a href="#" class="switch-tab" data-tab="register">Cadastre-se</a></p>
                </div>
            </div>

            <!-- Formulário de Cadastro -->
            <div id="registerForm" class="auth-form">
                <div class="form-group">
                    <label for="registerName">
                        <i class="fas fa-user"></i> Nome Completo
                    </label>
                    <input type="text" id="registerName" placeholder="Seu nome completo" required>
                </div>

                <div class="form-group">
                    <label for="registerEmail">
                        <i class="fas fa-envelope"></i> Email
                    </label>
                    <input type="email" id="registerEmail" placeholder="seu@email.com" required>
                </div>

                <div class="form-group">
                    <label for="registerPassword">
                        <i class="fas fa-lock"></i> Senha
                    </label>
                    <div class="password-input">
                        <input type="password" id="registerPassword" placeholder="Mínimo 6 caracteres" required>
                        <button type="button" class="toggle-password" data-target="registerPassword">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <small class="password-hint">A senha deve ter pelo menos 6 caracteres</small>
                </div>

                <div class="form-group">
                    <label for="registerConfirmPassword">
                        <i class="fas fa-lock"></i> Confirmar Senha
                    </label>
                    <div class="password-input">
                        <input type="password" id="registerConfirmPassword" placeholder="Confirme sua senha" required>
                        <button type="button" class="toggle-password" data-target="registerConfirmPassword">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="userType">
                        <i class="fas fa-user-tag"></i> Tipo de Usuário
                    </label>
                    <select id="userType" required>
                        <option value="" disabled selected>Selecione o tipo de usuário</option>
                        <option value="student">Aluno</option>
                        <option value="admin" id="adminOption" disabled>Administrador</option>
                    </select>
                    <small class="admin-hint" id="adminHint">O cadastro de administrador está disponível apenas para administradores existentes</small>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="acceptTerms" required>
                        <span>Eu concordo com os <a href="#" class="terms-link">Termos de Serviço</a> e <a href="#" class="terms-link">Política de Privacidade</a></span>
                    </label>
                </div>

                <button id="registerBtn" class="btn-auth btn-primary">
                    <i class="fas fa-user-plus"></i> Criar Conta
                </button>

                <div class="auth-footer">
                    <p>Já tem uma conta? <a href="#" class="switch-tab" data-tab="login">Faça login</a></p>
                </div>
            </div>

            <!-- Formulário de Recuperação de Senha -->
            <div id="recoverForm" class="auth-form">
                <div class="recover-icon">
                    <i class="fas fa-key"></i>
                </div>
                <h3>Recuperar Senha</h3>
                <p class="recover-text">Digite seu email para receber um link de recuperação de senha</p>

                <div class="form-group">
                    <label for="recoverEmail">
                        <i class="fas fa-envelope"></i> Email
                    </label>
                    <input type="email" id="recoverEmail" placeholder="seu@email.com" required>
                </div>

                <button id="recoverBtn" class="btn-auth btn-primary">
                    <i class="fas fa-paper-plane"></i> Enviar Link de Recuperação
                </button>

                <div class="auth-footer">
                    <p>Lembrou sua senha? <a href="#" class="switch-tab" data-tab="login">Faça login</a></p>
                </div>
            </div>
        </div>

        <div class="auth-features">
            <div class="feature-card">
                <i class="fas fa-gamepad"></i>
                <h3>Jogos Educativos</h3>
                <p>Aprenda matemática enquanto se diverte com nossos jogos interativos</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-chart-line"></i>
                <h3>Acompanhamento Personalizado</h3>
                <p>Monitore seu progresso com gráficos e relatórios detalhados</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-trophy"></i>
                <h3>Desafios e Conquistas</h3>
                <p>Supere desafios e desbloqueie conquistas enquanto aprende</p>
            </div>
        </div>
    </div>

    <!-- Aplicação Principal (após login) -->
    <div id="mainApp" class="main-app">
        <!-- Cabeçalho -->
        <header class="app-header">
            <div class="header-container">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="app-logo">
                        <i class="fas fa-brain"></i>
                        <h1>Math<span>Master</span></h1>
                    </div>
                </div>

                <div class="header-center">
                    <nav class="main-nav">
                        <ul>
                            <li><a href="#dashboard" class="nav-link active"><i class="fas fa-home"></i> Início</a></li>
                            <li><a href="#learn" class="nav-link"><i class="fas fa-book-open"></i> Aprender</a></li>
                            <li><a href="#games" class="nav-link"><i class="fas fa-gamepad"></i> Jogos</a></li>
                            <li><a href="#progress" class="nav-link"><i class="fas fa-chart-line"></i> Progresso</a></li>
                            <li id="adminNav" style="display: none;"><a href="#admin" class="nav-link"><i class="fas fa-cog"></i> Admin</a></li>
                        </ul>
                    </nav>
                </div>

                <div class="header-right">
                    <div class="user-menu">
                        <button class="user-btn" id="userBtn">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <span class="user-name" id="userName">Usuário</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="dropdown-header">
                                <div class="dropdown-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="dropdown-user-info">
                                    <h4 id="dropdownUserName">Usuário</h4>
                                    <span class="user-role" id="dropdownUserRole">Aluno</span>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="#profile" class="dropdown-item">
                                <i class="fas fa-user-edit"></i> Meu Perfil
                            </a>
                            <a href="#settings" class="dropdown-item">
                                <i class="fas fa-cog"></i> Configurações
                            </a>
                            <div class="dropdown-divider"></div>
                            <button id="logoutBtn" class="dropdown-item logout">
                                <i class="fas fa-sign-out-alt"></i> Sair
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Menu Lateral -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-user">
                    <div class="sidebar-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="sidebar-user-info">
                        <h4 id="sidebarUserName">Usuário</h4>
                        <span class="sidebar-user-role" id="sidebarUserRole">Aluno</span>
                    </div>
                </div>
                <button class="sidebar-close" id="sidebarClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="#dashboard" class="sidebar-link active">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#learn" class="sidebar-link">
                    <i class="fas fa-book-open"></i>
                    <span>Aprender</span>
                </a>
                <a href="#games" class="sidebar-link">
                    <i class="fas fa-gamepad"></i>
                    <span>Jogos</span>
                </a>
                <a href="#progress" class="sidebar-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Progresso</span>
                </a>
                <a href="#challenges" class="sidebar-link">
                    <i class="fas fa-trophy"></i>
                    <span>Desafios</span>
                </a>
                <div id="adminSidebar" style="display: none;">
                    <div class="sidebar-section">
                        <h4>Administração</h4>
                        <a href="#admin/users" class="sidebar-link">
                            <i class="fas fa-users"></i>
                            <span>Gerenciar Usuários</span>
                        </a>
                        <a href="#admin/reports" class="sidebar-link">
                            <i class="fas fa-chart-bar"></i>
                            <span>Relatórios</span>
                        </a>
                        <a href="#admin/settings" class="sidebar-link">
                            <i class="fas fa-cogs"></i>
                            <span>Configurações do Sistema</span>
                        </a>
                    </div>
                </div>
                <div class="sidebar-section">
                    <h4>Recursos</h4>
                    <a href="#help" class="sidebar-link">
                        <i class="fas fa-question-circle"></i>
                        <span>Ajuda</span>
                    </a>
                    <a href="#about" class="sidebar-link">
                        <i class="fas fa-info-circle"></i>
                        <span>Sobre</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="sidebar-progress">
                    <div class="progress-label">
                        <span>Nível atual</span>
                        <span id="sidebarLevel">Iniciante</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="sidebarProgress" style="width: 25%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conteúdo Principal -->
        <main class="app-content" id="appContent">
            <!-- Dashboard -->
            <section id="dashboard" class="app-section active">
                <div class="section-header">
                    <h2>Dashboard</h2>
                    <p class="section-subtitle">Bem-vindo de volta, <span id="dashboardUserName">Usuário</span>!</p>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card welcome-card">
                        <div class="card-content">
                            <h3>Continue de onde parou</h3>
                            <p>Você está evoluindo bem em multiplicação! Continue praticando para subir de nível.</p>
                            <button class="btn-continue">
                                <i class="fas fa-play"></i> Continuar Praticando
                            </button>
                        </div>
                        <div class="card-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                    </div>

                    <div class="dashboard-card stats-card">
                        <h3>Seu Progresso</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-value" id="statExercises">0</span>
                                    <span class="stat-label">Exercícios</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-percentage"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-value" id="statAccuracy">0%</span>
                                    <span class="stat-label">Precisão</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-value" id="statTime">0min</span>
                                    <span class="stat-label">Tempo</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-value" id="statLevel">1</span>
                                    <span class="stat-label">Nível</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card activity-card">
                        <h3>Atividade Recente</h3>
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-plus-circle"></i>
                                </div>
                                <div class="activity-content">
                                    <p>Você completou 10 exercícios de adição</p>
                                    <span class="activity-time">Há 2 horas</span>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-gamepad"></i>
                                </div>
                                <div class="activity-content">
                                    <p>Concluiu o nível 3 do Desafio Relâmpago</p>
                                    <span class="activity-time">Hoje cedo</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card quick-actions">
                        <h3>Ações Rápidas</h3>
                        <div class="actions-grid">
                            <button class="action-btn" data-action="practice">
                                <i class="fas fa-calculator"></i>
                                <span>Praticar</span>
                            </button>
                            <button class="action-btn" data-action="games">
                                <i class="fas fa-gamepad"></i>
                                <span>Jogar</span>
                            </button>
                            <button class="action-btn" data-action="challenges">
                                <i class="fas fa-trophy"></i>
                                <span>Desafios</span>
                            </button>
                            <button class="action-btn" data-action="progress">
                                <i class="fas fa-chart-line"></i>
                                <span>Progresso</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Seção Aprender -->
            <section id="learn" class="app-section">
                <div class="section-header">
                    <h2>Aprender Matemática</h2>
                    <p class="section-subtitle">Escolha uma operação para aprender e praticar</p>
                </div>

                <div class="operations-grid">
                    <!-- Operações serão carregadas via JavaScript -->
                </div>
            </section>

            <!-- Seção Jogos -->
            <section id="games" class="app-section">
                <div class="section-header">
                    <h2>Jogos Educativos</h2>
                    <p class="section-subtitle">Aprenda matemática enquanto se diverte!</p>
                </div>

                <div class="games-grid">
                    <!-- Jogos serão carregados via JavaScript -->
                </div>
            </section>

            <!-- Seção Progresso -->
            <section id="progress" class="app-section">
                <div class="section-header">
                    <h2>Seu Progresso</h2>
                    <p class="section-subtitle">Acompanhe sua evolução no aprendizado</p>
                </div>

                <div class="progress-container">
                    <div class="progress-stats">
                        <div class="progress-chart-container">
                            <canvas id="progressChart"></canvas>
                        </div>
                        <div class="progress-details">
                            <h3>Desempenho por Operação</h3>
                            <div class="operation-performance" id="operationPerformance">
                                <!-- Dados carregados via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Seção Admin (visível apenas para administradores) -->
            <section id="admin" class="app-section">
                <div class="section-header">
                    <h2>Painel Administrativo</h2>
                    <p class="section-subtitle">Gerencie usuários e visualize relatórios do sistema</p>
                </div>

                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="users">Usuários</button>
                    <button class="admin-tab" data-tab="reports">Relatórios</button>
                    <button class="admin-tab" data-tab="settings">Configurações</button>
                </div>

                <div class="admin-content">
                    <div id="adminUsers" class="admin-tab-content active">
                        <div class="admin-header">
                            <h3>Gerenciar Usuários</h3>
                            <button id="addUserBtn" class="btn-admin">
                                <i class="fas fa-user-plus"></i> Adicionar Usuário
                            </button>
                        </div>
                        <div class="users-table-container">
                            <table class="users-table">
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Email</th>
                                        <th>Tipo</th>
                                        <th>Cadastro</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- Usuários carregados via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="adminReports" class="admin-tab-content">
                        <h3>Relatórios do Sistema</h3>
                        <div class="reports-grid">
                            <!-- Relatórios serão gerados via JavaScript -->
                        </div>
                    </div>

                    <div id="adminSettings" class="admin-tab-content">
                        <h3>Configurações do Sistema</h3>
                        <!-- Configurações administrativas -->
                    </div>
                </div>
            </section>
        </main>

        <!-- Modal para Gerenciar Usuário -->
        <div id="userModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Editar Usuário</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="userForm">
                        <div class="form-group">
                            <label for="modalUserName">Nome</label>
                            <input type="text" id="modalUserName" required>
                        </div>
                        <div class="form-group">
                            <label for="modalUserEmail">Email</label>
                            <input type="email" id="modalUserEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="modalUserType">Tipo de Usuário</label>
                            <select id="modalUserType" required>
                                <option value="student">Aluno</option>
                                <option value="admin">Administrador</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="modalUserStatus">Status</label>
                            <select id="modalUserStatus" required>
                                <option value="active">Ativo</option>
                                <option value="inactive">Inativo</option>
                                <option value="blocked">Bloqueado</option>
                            </select>
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn-secondary modal-close">Cancelar</button>
                            <button type="submit" class="btn-primary">Salvar Alterações</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Notificações -->
        <div id="notificationContainer" class="notification-container"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
