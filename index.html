<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizMaster - Sistema de Quiz Educacional</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase App (core) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Tela de Login/Cadastro -->
    <div id="auth-container" class="container">
        <div class="auth-wrapper">
            <div class="auth-header">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <h1>QuizMaster</h1>
                </div>
                <p>Teste seus conhecimentos e entre no ranking!</p>
            </div>
            
            <div class="auth-box">
                <div class="tabs">
                    <button id="login-tab" class="tab active">
                        <i class="fas fa-sign-in-alt"></i>
                        Login
                    </button>
                    <button id="register-tab" class="tab">
                        <i class="fas fa-user-plus"></i>
                        Cadastro
                    </button>
                </div>
                
                <!-- Formulário de Login -->
                <div id="login-form" class="form active">
                    <h2>Entre na sua conta</h2>
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="login-email" placeholder="E-mail" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="login-password" placeholder="Senha" required>
                    </div>
                    <button id="login-btn" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i>
                        Entrar
                    </button>
                    <div class="auth-links">
                        <a href="#" id="forgot-password">Esqueci minha senha</a>
                    </div>
                    <p id="login-error" class="error-message"></p>
                </div>
                
                <!-- Formulário de Cadastro -->
                <div id="register-form" class="form">
                    <h2>Crie sua conta</h2>
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="register-name" placeholder="Nome completo" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="register-email" placeholder="E-mail" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="register-password" placeholder="Senha" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-users"></i>
                        <select id="register-type">
                            <option value="aluno">Aluno</option>
                            <option value="admin" id="admin-option">Administrador</option>
                        </select>
                    </div>
                    <button id="register-btn" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i>
                        Cadastrar
                    </button>
                    <p id="register-error" class="error-message"></p>
                </div>
            </div>
            
            <div class="auth-footer">
                <p>&copy; 2024 QuizMaster. Todos os direitos reservados.</p>
            </div>
        </div>
    </div>

    <!-- Dashboard do Aluno -->
    <div id="student-dashboard" class="container hidden">
        <header class="dashboard-header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <h1>QuizMaster</h1>
                </div>
                <nav class="tabs">
                    <button id="quizzes-tab" class="tab active">
                        <i class="fas fa-list-alt"></i>
                        <span class="tab-text">Quizzes</span>
                    </button>
                    <button id="ranking-tab" class="tab">
                        <i class="fas fa-trophy"></i>
                        <span class="tab-text">Ranking</span>
                    </button>
                    <button id="history-tab" class="tab">
                        <i class="fas fa-history"></i>
                        <span class="tab-text">Histórico</span>
                    </button>
                </nav>
            </div>
            <div class="user-info">
                <div class="user-details">
                    <span id="student-name" class="user-name"></span>
                    <span class="user-role">Aluno</span>
                </div>
                <button id="student-logout" class="btn btn-secondary">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="btn-text">Sair</span>
                </button>
            </div>
        </header>
        
        <main class="dashboard-content">
            <!-- Lista de Quizzes -->
            <div id="quizzes-section" class="section active">
                <div class="section-header">
                    <h2>Quizzes Disponíveis</h2>
                    <p>Teste seus conhecimentos e suba no ranking!</p>
                </div>
                <div id="quizzes-list" class="cards-container"></div>
            </div>
            
            <!-- Ranking -->
            <div id="ranking-section" class="section">
                <div class="section-header">
                    <h2>Ranking Geral</h2>
                    <p>Veja os melhores colocados</p>
                </div>
                <div id="ranking-list" class="ranking-container"></div>
            </div>

            <!-- Histórico -->
            <div id="history-section" class="section">
                <div class="section-header">
                    <h2>Meu Histórico</h2>
                    <p>Veja seu desempenho nos quizzes</p>
                </div>
                <div id="history-list" class="cards-container"></div>
            </div>
        </main>
    </div>

    <!-- Tela do Quiz -->
    <div id="quiz-container" class="container hidden">
        <header class="quiz-header">
            <div class="quiz-info">
                <h1 id="quiz-title-display"></h1>
                <p id="quiz-description-display"></p>
            </div>
            <div class="quiz-controls-top">
                <button id="exit-quiz-btn" class="btn btn-secondary">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="btn-text">Sair do Quiz</span>
                </button>
                <div class="quiz-timer">
                    <div class="timer-circle">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="28" stroke="#e0e0e0" stroke-width="3" fill="none"></circle>
                            <circle id="timer-progress" cx="30" cy="30" r="28" stroke="#4a6cf7" stroke-width="3" fill="none" 
                                    stroke-dasharray="175" stroke-dashoffset="0" transform="rotate(-90 30 30)"></circle>
                        </svg>
                        <span id="quiz-timer">00:00</span>
                    </div>
                </div>
            </div>
        </header>
        
        <main class="quiz-content">
            <div class="quiz-progress">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <span id="quiz-progress-text">Questão 0/0</span>
            </div>
            
            <div id="question-container" class="question-container">
                <div class="question-text-container">
                    <h2 id="question-text">Carregando questão...</h2>
                </div>
                <div id="options-container" class="options-container">
                    <div class="option" data-value="a">
                        <div class="option-content">
                            <span class="option-letter">A</span>
                            <span id="option-a-text" class="option-text">Carregando opção A...</span>
                        </div>
                    </div>
                    <div class="option" data-value="b">
                        <div class="option-content">
                            <span class="option-letter">B</span>
                            <span id="option-b-text" class="option-text">Carregando opção B...</span>
                        </div>
                    </div>
                    <div class="option" data-value="c">
                        <div class="option-content">
                            <span class="option-letter">C</span>
                            <span id="option-c-text" class="option-text">Carregando opção C...</span>
                        </div>
                    </div>
                    <div class="option" data-value="d">
                        <div class="option-content">
                            <span class="option-letter">D</span>
                            <span id="option-d-text" class="option-text">Carregando opção D...</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="quiz-controls">
                <button id="prev-question" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    <span class="btn-text">Anterior</span>
                </button>
                <div class="quiz-nav">
                    <span id="current-question">1</span> de <span id="total-questions">0</span>
                </div>
                <button id="next-question" class="btn btn-primary">
                    <span class="btn-text">Próxima</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
                <button id="finish-quiz" class="btn btn-success hidden">
                    <i class="fas fa-flag-checkered"></i>
                    <span class="btn-text">Finalizar Quiz</span>
                </button>
            </div>
        </main>
    </div>

    <!-- Resultado do Quiz -->
    <div id="quiz-result" class="container hidden">
        <div class="result-container">
            <div class="result-header">
                <div class="result-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2>Quiz Concluído!</h2>
                <p id="result-subtitle">Veja como você foi</p>
            </div>
            
            <div class="result-content">
                <div class="score-circle">
                    <div class="circle-background"></div>
                    <div class="circle-progress" id="circle-progress"></div>
                    <div class="score-text">
                        <span id="score-percentage">0%</span>
                        <span id="score-fraction">0/0</span>
                    </div>
                </div>
                
                <div class="result-details">
                    <div class="detail-item">
                        <span class="detail-label">Acertos</span>
                        <span id="correct-answers" class="detail-value correct">0</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Erros</span>
                        <span id="wrong-answers" class="detail-value wrong">0</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Tempo</span>
                        <span id="time-taken" class="detail-value">00:00</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Posição no Ranking</span>
                        <span id="ranking-position" class="detail-value">-</span>
                    </div>
                </div>
            </div>
            
            <div class="result-actions">
                <button id="review-quiz" class="btn btn-secondary">
                    <i class="fas fa-redo"></i>
                    <span class="btn-text">Revisar Respostas</span>
                </button>
                <button id="back-to-dashboard" class="btn btn-primary">
                    <i class="fas fa-home"></i>
                    <span class="btn-text">Voltar ao Dashboard</span>
                </button>
                <button id="new-quiz" class="btn btn-success">
                    <i class="fas fa-play"></i>
                    <span class="btn-text">Fazer Outro Quiz</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <p>Carregando...</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
